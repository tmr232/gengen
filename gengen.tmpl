{{define "package"}}
    //go:build !gengen

    // AUTOGENERATED DO NOT MODIFY

    package {{.PackageName}}

    {{.Imports}}

    {{join .Functions "\n"}}

{{end}}


{{define "function"}}
    func {{.Name}}{{trimPrefix .Signature "func"}} {
        {{.State}}
        __next := 0
        return &gengen.GeneratorFunction[{{.ReturnType}}]{
            Advance: func() (__hasValue bool, __value {{.ReturnType}}, __err error) {
        // This should all be generated using a state-manager class.
                switch __next {
                case 0:
                    goto __next_0
                }
                {{.Body}}
            },
        }
    }
{{end}}

{{define "return"}}
    __err = {{.ReturnValue}}
    return
{{end}}

{{define "yield"}}
{{/*TODO: Add state and state labels!*/}}
    __hasValue = true
    __value = {{.YieldValue}}
    return
{{end}}